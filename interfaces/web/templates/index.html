<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TranscriptorApp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Tailwind config is handled by CDN script -->
    <!-- Link external CSS -->
    <link rel="stylesheet" href="{{ url_for('static', path='/style.css') }}" />
  </head>
  <body class="min-h-screen flex flex-col bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg py-5 px-6 shadow-lg text-white">
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <div class="flex items-center space-x-3">
          <div class="bg-white bg-opacity-20 p-2 rounded-lg">
            <i class="fas fa-file-audio text-white text-xl"></i>
          </div>
          <h1 class="text-2xl font-bold tracking-tight">TranscriptorApp</h1>
        </div>
        <div class="flex items-center space-x-4">
          <div
            class="flex items-center space-x-2 bg-white bg-opacity-10 px-4 py-2 rounded-lg border border-white border-opacity-20"
          >
            <i class="fas fa-key text-green-300 text-sm"></i>
            <span class="text-sm font-medium">API Key: Connected</span>
          </div>
          <button
            class="hover:bg-white hover:bg-opacity-10 p-2 rounded-full transition"
          >
            <i class="fas fa-cog text-white"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow">
      <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- URL Input Section -->
        <section class="mb-8">
          <div class="bg-white rounded-xl shadow-sm p-8 border border-gray-100">
            <h2 class="text-xl font-semibold mb-5 text-gray-800">
              Video/Audio URLs
            </h2>
            <div class="space-y-4">
              <div class="url-input-container space-y-3">
                <div class="flex items-start space-x-2">
                  <div class="flex-grow">
                    <div class="relative">
                      <input
                        type="text"
                        placeholder="Enter URL (YouTube, TikTok, Instagram, etc.)"
                        class="input-field w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none text-gray-700"
                      />
                      <button
                        class="absolute right-3 top-3 text-gray-400 hover:text-secondary-500 transition"
                        title="Paste from clipboard"
                      >
                        <i class="far fa-clipboard"></i>
                      </button>
                    </div>
                  </div>
                  <button
                    class="text-red-500 hover:text-red-700 pt-3 transition"
                  >
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <button
                class="flex items-center space-x-1 text-primary-600 hover:text-primary-800 font-medium transition"
              >
                <i class="fas fa-plus text-xs"></i>
                <span>Add another URL</span>
              </button>
            </div>
          </div>
        </section>

        <!-- Configuration Panel -->
        <section class="mb-8">
          <div class="bg-white rounded-xl shadow-sm p-8 border border-gray-100">
            <h2 class="text-xl font-semibold mb-5 text-gray-800">
              Transcription Settings
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <!-- Model Selection -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Whisper Model</label
                >
                <select
                  class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none input-field bg-white text-gray-700"
                >
                  <option value="whisper-1">whisper-1 (Default)</option>
                  <option value="whisper-large-v3">whisper-large-v3</option>
                </select>
                <p class="text-xs text-gray-500 mt-1">
                  Select model based on accuracy needs and processing time
                </p>
              </div>

              <!-- Output Format -->
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Output Format</label
                >
                <div class="flex space-x-6 mt-2">
                  <label class="inline-flex items-center">
                    <input
                      type="checkbox"
                      checked
                      class="text-primary-600 rounded w-5 h-5"
                    />
                    <span class="ml-2 text-gray-700">TXT</span>
                  </label>
                  <label class="inline-flex items-center">
                    <input
                      type="checkbox"
                      checked
                      class="text-primary-600 rounded w-5 h-5"
                    />
                    <span class="ml-2 text-gray-700">SRT</span>
                  </label>
                </div>
                <p class="text-xs text-gray-500 mt-1">
                  TXT for plain text, SRT for subtitles with timestamps
                </p>
              </div>
            </div>

            <!-- Advanced Options Toggle -->
            <div class="mt-8 border-t border-gray-100 pt-6">
              <button
                class="flex items-center space-x-2 text-sm font-medium text-gray-600 hover:text-gray-900 transition"
                id="advanced-toggle"
              >
                <i class="fas fa-cog"></i>
                <span>Advanced Options</span>
                <i class="fas fa-chevron-down text-xs ml-1"></i>
              </button>

              <!-- Advanced Options Section -->
              <div
                class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-6 hidden"
                id="advanced-options"
              >
                <!-- Left Column -->
                <div class="space-y-6">
                  <!-- Language Selection -->
                  <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Language (Optional)</label
                    >
                    <select
                      class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none input-field bg-white text-gray-700"
                    >
                      <option value="">Auto-detect</option>
                      <option value="en">English</option>
                      <option value="es">Spanish</option>
                      <option value="fr">French</option>
                      <option value="de">German</option>
                      <option value="ja">Japanese</option>
                      <option value="zh">Chinese</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">
                      Setting a language may improve accuracy
                    </p>
                  </div>

                  <!-- Speaker Labels -->
                  <div>
                    <label class="inline-flex items-center">
                      <input
                        type="checkbox"
                        class="text-primary-600 rounded w-5 h-5"
                        id="speaker-labels-checkbox"
                      />
                      <span class="ml-2 text-gray-700">Speaker Labels</span>
                    </label>
                    <p class="text-xs text-gray-500 mt-1">
                      Identify different speakers in the transcript
                    </p>
                  </div>

                  <!-- Verbose Output -->
                  <div>
                    <label class="inline-flex items-center">
                      <input
                        type="checkbox"
                        class="text-primary-600 rounded w-5 h-5"
                      />
                      <span class="ml-2 text-gray-700">Verbose Output</span>
                    </label>
                    <p class="text-xs text-gray-500 mt-1">
                      Include detailed processing information
                    </p>
                  </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-6">
                  <!-- Keep Audio Files -->
                  <div class="space-y-3">
                    <label class="inline-flex items-center">
                      <input
                        type="checkbox"
                        class="text-primary-600 rounded w-5 h-5"
                        id="keep-audio-checkbox"
                      />
                      <span class="ml-2 text-gray-700">Keep Audio Files</span>
                    </label>
                    <p class="text-xs text-gray-500 mt-1">
                      Save extracted audio after transcription
                    </p>

                    <!-- Audio Format (conditional on Keep Audio Files) -->
                    <div class="pl-6 hidden mt-4" id="audio-format-container">
                      <label
                        class="block text-sm font-medium text-gray-700 mb-1"
                        >Audio Format</label
                      >
                      <select
                        class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none input-field bg-white text-gray-700"
                      >
                        <option value="mp3">MP3</option>
                        <option value="opus">Opus</option>
                        <option value="wav">WAV</option>
                      </select>
                      <p class="text-xs text-gray-500 mt-1">
                        Select audio format for saved files
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Job Control Section -->
        <section class="mb-12 flex justify-center">
          <div class="flex space-x-4">
            <button
              class="btn-gradient text-white px-8 py-4 rounded-lg font-medium shadow-md hover:opacity-90 transition flex items-center space-x-3"
            >
              <i class="fas fa-play"></i>
              <span>Start Transcription</span>
            </button>
            <button
              class="bg-gray-100 text-gray-700 px-8 py-4 rounded-lg font-medium hover:bg-gray-200 transition"
            >
              Clear Form
            </button>
          </div>
        </section>

        <!-- Jobs List Section -->
        <section class="mb-12">
          <div class="flex justify-between items-center mb-5">
            <h2 class="text-xl font-semibold text-gray-800">Active Jobs</h2>
            <div class="flex items-center space-x-2 text-sm text-gray-500">
              <i class="fas fa-info-circle mr-1"></i>
              <span id="job-count-display">No active jobs</span>
              <!-- Placeholder for dynamic count -->
            </div>
          </div>

          <div class="space-y-5">
            <!-- Job cards will be dynamically inserted here by jobManager.js -->
          </div>
        </section>

        <!-- Results Section (Initially Hidden) -->
        <section class="mb-8 hidden" id="results-section">
          <div class="bg-white rounded-xl shadow-sm p-8 border border-gray-100">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-xl font-semibold text-gray-800">
                Transcript Preview
              </h2>
              <div class="flex space-x-3">
                <button
                  class="text-sm px-4 py-2 bg-primary-100 hover:bg-primary-200 text-primary-700 rounded-lg flex items-center space-x-1.5 transition"
                >
                  <i class="fas fa-download"></i>
                  <span>Download All Files</span>
                </button>
                <button
                  class="text-sm px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center space-x-1.5 transition text-gray-700"
                >
                  <i class="fas fa-times"></i>
                  <span>Close Preview</span>
                </button>
              </div>
            </div>

            <div class="mb-6 bg-gray-50 p-4 rounded-lg">
              <h3 class="font-medium text-lg mb-1 text-gray-800">
                How to Make Pasta Carbonara
              </h3>
              <div class="flex items-center text-sm text-gray-500">
                <span class="flex items-center mr-4"
                  ><i class="far fa-clock mr-1.5"></i>12.5 minutes</span
                >
                <span class="flex items-center mr-4"
                  ><i class="fas fa-microphone mr-1.5"></i>whisper-1</span
                >
                <span class="flex items-center"
                  ><i class="fas fa-globe mr-1.5"></i>Italian</span
                >
              </div>
            </div>

            <div
              class="bg-gray-50 p-6 rounded-lg h-72 overflow-y-auto mb-6 text-sm border border-gray-200"
            >
              <p class="mb-3">
                <span class="text-gray-500 mr-2">[00:00:00]</span>
                Ciao a tutti e benvenuti nella mia cucina. Oggi prepareremo la
                pasta carbonara, un piatto tradizionale romano.
              </p>
              <p class="mb-3">
                <span class="text-gray-500 mr-2">[00:00:15]</span>
                Gli ingredienti che ci servono sono: pasta, uova, guanciale,
                pecorino romano e pepe nero.
              </p>
              <p class="mb-3">
                <span class="text-gray-500 mr-2">[00:00:30]</span>
                Iniziamo tagliando il guanciale a dadini. È importante usare il
                guanciale e non la pancetta per una carbonara autentica.
              </p>
              <p class="mb-3">
                <span class="text-gray-500 mr-2">[00:00:45]</span>
                Mettiamo a bollire l'acqua per la pasta e aggiungiamo il sale
                quando bolle.
              </p>
              <p class="mb-3">
                <span class="text-gray-500 mr-2">[00:01:00]</span>
                Nel frattempo, in una ciotola sbattiamo le uova con il pecorino
                grattugiato e una generosa macinata di pepe nero.
              </p>
              <p class="mb-3">
                <span class="text-gray-500 mr-2">[00:01:15]</span>
                Facciamo rosolare il guanciale in una padella a fuoco medio fino
                a quando diventa croccante e rilascia il suo grasso.
              </p>
              <p class="mb-3">
                <span class="text-gray-500 mr-2">[00:01:30]</span>
                Quando la pasta è cotta al dente, scoliamola conservando un po'
                di acqua di cottura.
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
                <h4 class="text-sm font-medium mb-3 text-gray-700">
                  Available Files
                </h4>
                <div class="space-y-3">
                  <a
                    href="#"
                    class="flex items-center space-x-3 text-sm text-secondary-700 hover:text-secondary-900 p-2 hover:bg-gray-100 rounded transition"
                  >
                    <i class="fas fa-file-alt text-secondary-500"></i>
                    <span>How to Make Pasta Carbonara.txt</span>
                    <span class="text-xs text-gray-500 ml-auto">42 KB</span>
                  </a>
                  <a
                    href="#"
                    class="flex items-center space-x-3 text-sm text-secondary-700 hover:text-secondary-900 p-2 hover:bg-gray-100 rounded transition"
                  >
                    <i class="fas fa-file-alt text-secondary-500"></i>
                    <span>How to Make Pasta Carbonara.srt</span>
                    <span class="text-xs text-gray-500 ml-auto">35 KB</span>
                  </a>
                </div>
              </div>

              <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
                <h4 class="text-sm font-medium mb-3 text-gray-700">
                  Audio File
                </h4>
                <div class="p-4 rounded-lg bg-white border border-gray-200">
                  <audio controls class="w-full h-10">
                    <source src="#" type="audio/mp3" />
                    Your browser does not support the audio element.
                  </audio>
                  <div
                    class="flex justify-between items-center mt-3 text-xs text-gray-500"
                  >
                    <span>MP3 • 44.1kHz • Stereo</span>
                    <span>12:30 / 12:30</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="subtle-gradient-bg py-6 border-t border-gray-200 mt-auto">
      <div class="max-w-6xl mx-auto px-6">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="flex items-center space-x-6 mb-4 md:mb-0">
            <div class="text-sm font-medium text-gray-700">
              TranscriptorApp v1.0
            </div>
            <div class="flex space-x-5">
              <a
                href="#"
                class="text-sm text-gray-600 hover:text-primary-700 transition"
                >Documentation</a
              >
              <a
                href="#"
                class="text-sm text-gray-600 hover:text-primary-700 transition"
                >API Reference</a
              >
              <a
                href="#"
                class="text-sm text-gray-600 hover:text-primary-700 transition"
                >Support</a
              >
            </div>
          </div>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-600 hover:text-primary-700 transition">
              <i class="fab fa-github"></i>
            </a>
            <a href="#" class="text-gray-600 hover:text-primary-700 transition">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="text-gray-600 hover:text-primary-700 transition">
              <i class="fab fa-discord"></i>
            </a>
          </div>
        </div>
        <div class="text-xs text-center text-gray-500 mt-6">
          &copy; 2025 TranscriptorApp. All rights reserved. Not affiliated with
          OpenAI or any video platform.
        </div>
      </div>
    </footer>

    <!-- Modal Template (Hidden by Default) -->
    <div
      id="modal"
      class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden"
    >
      <div class="bg-white rounded-xl shadow-xl max-w-lg w-full mx-4 p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-gray-900" id="modal-title">
            Modal Title
          </h3>
          <button class="text-gray-400 hover:text-gray-500" id="close-modal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div id="modal-content" class="mb-5">
          <!-- Modal content gets inserted here dynamically -->
        </div>
        <div class="flex justify-end space-x-3">
          <button
            class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-700 transition"
            id="modal-cancel"
          >
            Cancel
          </button>
          <button
            class="px-4 py-2 btn-gradient text-white rounded-lg hover:opacity-90 transition"
            id="modal-confirm"
          >
            Confirm
          </button>
        </div>
      </div>
    </div>

    <!-- Link external JavaScript -->
    <script
      type="module"
      src="{{ url_for('static', path='/main.js') }}"
    ></script>
  </body>
</html>
